{"parse":{"title":"CANpie","pageid":53792239,"revid":800239423,"text":{"*":"<div class=\"mw-parser-output\"><div role=\"navigation\" aria-label=\"Portals\" class=\"noprint portal plainlist tright\" style=\"margin:0.5em 0 0.5em 1em;border:solid #aaa 1px\">\n<ul style=\"display:table;box-sizing:border-box;padding:0.1em;max-width:175px;background:#f9f9f9;font-size:85%;line-height:110%;font-style:italic;font-weight:bold\">\n<li style=\"display:table-row\"><span style=\"display:table-cell;padding:0.2em;vertical-align:middle;text-align:center\"><img alt=\"\" src=\"//upload.wikimedia.org/wikipedia/commons/thumb/3/31/Free_and_open-source_software_logo_%282009%29.svg/28px-Free_and_open-source_software_logo_%282009%29.svg.png\" width=\"28\" height=\"28\" class=\"noviewer\" srcset=\"//upload.wikimedia.org/wikipedia/commons/thumb/3/31/Free_and_open-source_software_logo_%282009%29.svg/42px-Free_and_open-source_software_logo_%282009%29.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/3/31/Free_and_open-source_software_logo_%282009%29.svg/56px-Free_and_open-source_software_logo_%282009%29.svg.png 2x\" data-file-width=\"512\" data-file-height=\"512\" /></span><span style=\"display:table-cell;padding:0.2em 0.2em 0.2em 0.3em;vertical-align:middle\"><a href=\"/wiki/Portal:Free_software\" class=\"mw-redirect\" title=\"Portal:Free software\">Free software portal</a></span></li></ul></div>\n<p><b>CANpie</b> (CAN Programming Interface Environment) is an <a href=\"/wiki/Open_source\" class=\"mw-redirect\" title=\"Open source\">open source</a> project and pursues the objective of creating and establishing an open and standardized software API for access to the <a href=\"/wiki/CAN_bus\" title=\"CAN bus\">CAN bus</a>.\n</p>\n<div class=\"thumb tright\"><div class=\"thumbinner\" style=\"width:302px;\"><a href=\"/wiki/File:CANpieFD_Logo.png\" class=\"image\"><img alt=\"\" src=\"//upload.wikimedia.org/wikipedia/en/thumb/4/44/CANpieFD_Logo.png/300px-CANpieFD_Logo.png\" width=\"300\" height=\"100\" class=\"thumbimage\" srcset=\"//upload.wikimedia.org/wikipedia/en/thumb/4/44/CANpieFD_Logo.png/450px-CANpieFD_Logo.png 1.5x, //upload.wikimedia.org/wikipedia/en/4/44/CANpieFD_Logo.png 2x\" data-file-width=\"547\" data-file-height=\"182\" /></a>  <div class=\"thumbcaption\"><div class=\"magnify\"><a href=\"/wiki/File:CANpieFD_Logo.png\" class=\"internal\" title=\"Enlarge\"></a></div>CANpie FD logo</div></div></div>\n<p>The project was established in 2001<sup id=\"cite_ref-1\" class=\"reference\"><a href=\"#cite_note-1\">&#91;1&#93;</a></sup> by MicroControl and is licensed under <a href=\"/wiki/Apache_License\" title=\"Apache License\">Apache License Version 2.0</a>. The current version of the CANpie API<sup id=\"cite_ref-2\" class=\"reference\"><a href=\"#cite_note-2\">&#91;2&#93;</a></sup> covers both classical CAN frames as well as <a href=\"/wiki/CAN_FD\" title=\"CAN FD\">ISO CAN FD</a><sup id=\"cite_ref-3\" class=\"reference\"><a href=\"#cite_note-3\">&#91;3&#93;</a></sup> frames. The API is designed for embedded control applications as well as for PC interface boards: embedded <a href=\"/wiki/Microcontroller\" title=\"Microcontroller\">microcontrollers</a> are programmed in C, a C++ API is provided for OS independent access to interface boards. The API provides ISO/OSI Layer-2 (Data Link Layer) functionality. It is not the intention of CANpie to incorporate higher layer functionality (e.g. <a href=\"/wiki/CANopen\" title=\"CANopen\">CANopen</a>, <a href=\"/wiki/SAE_J1939\" title=\"SAE J1939\">SAE J1939</a>).\n</p>\n<div id=\"toc\" class=\"toc\"><input type=\"checkbox\" role=\"button\" id=\"toctogglecheckbox\" class=\"toctogglecheckbox\" style=\"display:none\" /><div class=\"toctitle\" lang=\"en\" dir=\"ltr\"><h2>Contents</h2><span class=\"toctogglespan\"><label class=\"toctogglelabel\" for=\"toctogglecheckbox\"></label></span></div>\n<ul>\n<li class=\"toclevel-1 tocsection-1\"><a href=\"#Driver_Principle\"><span class=\"tocnumber\">1</span> <span class=\"toctext\">Driver Principle</span></a></li>\n<li class=\"toclevel-1 tocsection-2\"><a href=\"#Usage\"><span class=\"tocnumber\">2</span> <span class=\"toctext\">Usage</span></a></li>\n<li class=\"toclevel-1 tocsection-3\"><a href=\"#Similar_projects\"><span class=\"tocnumber\">3</span> <span class=\"toctext\">Similar projects</span></a></li>\n<li class=\"toclevel-1 tocsection-4\"><a href=\"#References\"><span class=\"tocnumber\">4</span> <span class=\"toctext\">References</span></a></li>\n<li class=\"toclevel-1 tocsection-5\"><a href=\"#External_links\"><span class=\"tocnumber\">5</span> <span class=\"toctext\">External links</span></a></li>\n</ul>\n</div>\n\n<h2><span class=\"mw-headline\" id=\"Driver_Principle\">Driver Principle</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/w/index.php?title=CANpie&amp;action=edit&amp;section=1\" title=\"Edit section: Driver Principle\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>\n<p>The CANpie API supports the concept of hardware message buffers (mailboxes) with a total limit of 255 buffers. A message buffer has a unique direction (receive or transmit).  As an option it is possible to connect a <a href=\"/wiki/FIFO_(computing_and_electronics)\" title=\"FIFO (computing and electronics)\">FIFO</a> with arbitrary size to a message buffer for both transfer directions. The total number of CAN channels is limited to 255, the API provides a method to gather information about the features of each CAN hardware channel. This is especially important for an application designer who wants to write the code only once. The CAN frame time-stamping (specified by <a href=\"/wiki/CAN_in_Automation\" title=\"CAN in Automation\">CiA</a> 603, CAN Frame time-stamping \u2013 Requirements for network time management<sup id=\"cite_ref-4\" class=\"reference\"><a href=\"#cite_note-4\">&#91;4&#93;</a></sup>) is supported with a resolution of 1 nano-second.\n</p>\n<h2><span class=\"mw-headline\" id=\"Usage\">Usage</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/w/index.php?title=CANpie&amp;action=edit&amp;section=2\" title=\"Edit section: Usage\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>\n<div class=\"thumb tright\"><div class=\"thumbinner\" style=\"width:302px;\"><a href=\"/wiki/File:Canpie_structure.png\" class=\"image\"><img alt=\"\" src=\"//upload.wikimedia.org/wikipedia/en/thumb/4/45/Canpie_structure.png/300px-Canpie_structure.png\" width=\"300\" height=\"161\" class=\"thumbimage\" srcset=\"//upload.wikimedia.org/wikipedia/en/thumb/4/45/Canpie_structure.png/450px-Canpie_structure.png 1.5x, //upload.wikimedia.org/wikipedia/en/thumb/4/45/Canpie_structure.png/600px-Canpie_structure.png 2x\" data-file-width=\"1800\" data-file-height=\"966\" /></a>  <div class=\"thumbcaption\"><div class=\"magnify\"><a href=\"/wiki/File:Canpie_structure.png\" class=\"internal\" title=\"Enlarge\"></a></div>CANpie Structure</div></div></div>\n<p>The following code snippet shows the initialisation of a microcontroller.\n</p>\n<div style=\"margin-right: 320px;\" class=\"mw-highlight mw-content-ltr\" dir=\"ltr\"><pre><span></span><span class=\"cp\">#include</span> <span class=\"cpf\">&quot;cp_core.h&quot;  // CANpie core functions</span><span class=\"cp\"></span>\n\n<span class=\"kt\">void</span> <span class=\"nf\">MyCanInit</span><span class=\"p\">(</span><span class=\"kt\">void</span><span class=\"p\">)</span>\n<span class=\"p\">{</span>\n   <span class=\"n\">CpPort_ts</span>  <span class=\"n\">tsCanPortT</span><span class=\"p\">;</span>   <span class=\"c1\">// logical CAN port</span>\n   <span class=\"c1\">//---------------------------------------------------</span>\n   <span class=\"c1\">// setup the CAN controller / open a physical CAN</span>\n   <span class=\"c1\">// port</span>\n   <span class=\"c1\">//</span>\n   <span class=\"n\">memset</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">tsCanPortT</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"k\">sizeof</span><span class=\"p\">(</span><span class=\"n\">CpPort_ts</span><span class=\"p\">));</span>\n   <span class=\"n\">CpCoreDriverInit</span><span class=\"p\">(</span><span class=\"n\">eCP_CHANNEL_1</span><span class=\"p\">,</span> <span class=\"o\">&amp;</span><span class=\"n\">tsCanPortT</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">);</span>\n   <span class=\"c1\">//---------------------------------------------------</span>\n   <span class=\"c1\">// setup 500 kBit/s</span>\n   <span class=\"c1\">//</span>\n   <span class=\"n\">CpCoreBitrate</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">tsCanPortT</span><span class=\"p\">,</span>\n                 <span class=\"n\">eCP_BITRATE_500K</span><span class=\"p\">,</span>\n                 <span class=\"n\">eCP_BITRATE_NONE</span><span class=\"p\">);</span>\n   <span class=\"c1\">//---------------------------------------------------</span>\n   <span class=\"c1\">// start CAN operation</span>\n   <span class=\"c1\">//</span>\n   <span class=\"n\">CpCoreCanMode</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">tsCanPortT</span><span class=\"p\">,</span> <span class=\"n\">eCP_MODE_OPERATION</span><span class=\"p\">);</span>\n   <span class=\"c1\">//.. now we are operational</span>\n<span class=\"p\">}</span>\n</pre></div>\n<h2><span class=\"mw-headline\" id=\"Similar_projects\">Similar projects</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/w/index.php?title=CANpie&amp;action=edit&amp;section=3\" title=\"Edit section: Similar projects\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>\n<p>For the <a href=\"/wiki/Linux\" title=\"Linux\">Linux</a> operating system the projects <a href=\"/wiki/Can4linux\" title=\"Can4linux\">can4linux</a> and <a href=\"/wiki/SocketCAN\" title=\"SocketCAN\">SocketCAN</a> provide support for Classical CAN and ISO CAN FD. The commercial <a href=\"/wiki/Autosar\" class=\"mw-redirect\" title=\"Autosar\">AUTOSAR</a> specification supports CAN FD since version 4.3 and is available only for AUTOSAR partners. The CMSIS-Driver (Cortex Microcontroller Software Interface Standard) specification is a software API that describes peripheral driver interfaces for middleware stacks and user applications on <a href=\"/wiki/ARM_architecture\" title=\"ARM architecture\">ARM</a> Cortex-M processors.<sup id=\"cite_ref-5\" class=\"reference\"><a href=\"#cite_note-5\">&#91;5&#93;</a></sup>\n</p>\n<h2><span class=\"mw-headline\" id=\"References\">References</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/w/index.php?title=CANpie&amp;action=edit&amp;section=4\" title=\"Edit section: References\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>\n<div class=\"mw-references-wrap\"><ol class=\"references\">\n<li id=\"cite_note-1\"><span class=\"mw-cite-backlink\"><b><a href=\"#cite_ref-1\">^</a></b></span> <span class=\"reference-text\"><a rel=\"nofollow\" class=\"external free\" href=\"https://sourceforge.net/projects/canpie/files/?source=navbar\">https://sourceforge.net/projects/canpie/files/?source=navbar</a></span>\n</li>\n<li id=\"cite_note-2\"><span class=\"mw-cite-backlink\"><b><a href=\"#cite_ref-2\">^</a></b></span> <span class=\"reference-text\"><a rel=\"nofollow\" class=\"external free\" href=\"http://www.microcontrol.net/download/canpie/canpie_user_v3r00.pdf\">http://www.microcontrol.net/download/canpie/canpie_user_v3r00.pdf</a></span>\n</li>\n<li id=\"cite_note-3\"><span class=\"mw-cite-backlink\"><b><a href=\"#cite_ref-3\">^</a></b></span> <span class=\"reference-text\"><a rel=\"nofollow\" class=\"external free\" href=\"https://www.can-cia.org/fileadmin/resources/documents/proceedings/2012_hartwich.pdf\">https://www.can-cia.org/fileadmin/resources/documents/proceedings/2012_hartwich.pdf</a></span>\n</li>\n<li id=\"cite_note-4\"><span class=\"mw-cite-backlink\"><b><a href=\"#cite_ref-4\">^</a></b></span> <span class=\"reference-text\"><a rel=\"nofollow\" class=\"external free\" href=\"https://www.can-cia.org/standardization/specifications/\">https://www.can-cia.org/standardization/specifications/</a></span>\n</li>\n<li id=\"cite_note-5\"><span class=\"mw-cite-backlink\"><b><a href=\"#cite_ref-5\">^</a></b></span> <span class=\"reference-text\"><a rel=\"nofollow\" class=\"external free\" href=\"https://www.arm.com/products/processors/cortex-m/cortex-microcontroller-software-interface-standard.php\">https://www.arm.com/products/processors/cortex-m/cortex-microcontroller-software-interface-standard.php</a></span>\n</li>\n</ol></div>\n<h2><span class=\"mw-headline\" id=\"External_links\">External links</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/w/index.php?title=CANpie&amp;action=edit&amp;section=5\" title=\"Edit section: External links\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h2>\n<ul><li><a rel=\"nofollow\" class=\"external text\" href=\"https://canpie.github.io/\">CANpie documentation</a></li>\n<li><a rel=\"nofollow\" class=\"external text\" href=\"https://github.com/canpie/CANpie\">CANpie project site</a></li>\n<li><a rel=\"nofollow\" class=\"external text\" href=\"https://can-newsletter.org/software/software-miscellaneous/nr_canpie_micro-control_140225\">CAN newsletter 2014-02-25</a></li>\n<li><a rel=\"nofollow\" class=\"external text\" href=\"http://www2.parc.com/spl/projects/modrobots/publications/pdf/IROS01.pdf\">Software Architecture for Modular Self-Reconfigurable Robots, Xerox Palo Alto Research Center</a></li>\n<li><a rel=\"nofollow\" class=\"external text\" href=\"http://autosar.org/\">AUTOSAR website</a></li>\n<li><a rel=\"nofollow\" class=\"external text\" href=\"http://sourceforge.net/projects/can4linux/\">can4linux project site</a></li>\n<li><a rel=\"nofollow\" class=\"external text\" href=\"https://github.com/linux-can/\">SocketCAN project site</a></li>\n<li><a rel=\"nofollow\" class=\"external text\" href=\"https://register.dpma.de/DPMAregister/pat/register?AKZ=1020040208808\">Patent applied for SocketCAN (German language)</a></li>\n<li><a rel=\"nofollow\" class=\"external text\" href=\"https://www.can-cia.org/fileadmin/resources/documents/proceedings/2017_koppe.pdf\">iCC 2017 - \"CAN driver API - migration from Classical CAN to CAN FD\"</a></li></ul>\n\n<!-- \nNewPP limit report\nParsed by mw2225\nCached time: 20180919041117\nCache expiry: 1900800\nDynamic content: false\nCPU time usage: 0.060 seconds\nReal time usage: 0.071 seconds\nPreprocessor visited node count: 103/1000000\nPreprocessor generated node count: 0/1500000\nPost\u2010expand include size: 1342/2097152 bytes\nTemplate argument size: 0/2097152 bytes\nHighest expansion depth: 2/40\nExpensive parser function count: 0/500\nUnstrip recursion depth: 0/20\nUnstrip post\u2010expand size: 4471/5000000 bytes\nNumber of Wikibase entities loaded: 0/400\nLua time usage: 0.011/10.000 seconds\nLua memory usage: 788 KB/50 MB\n-->\n<!--\nTransclusion expansion time report (%,ms,calls,template)\n100.00%   31.188      1 Template:Portal\n100.00%   31.188      1 -total\n-->\n\n<!-- Saved in parser cache with key enwiki:pcache:idhash:53792239-0!canonical and timestamp 20180919041117 and revision id 800239423\n -->\n</div>"},"langlinks":[],"categories":[{"sortkey":"","*":"CAN_bus"},{"sortkey":"","*":"Communication"},{"sortkey":"","*":"Data_transmission"},{"sortkey":"","*":"Serial_buses"}],"links":[{"ns":0,"exists":"","*":"ARM architecture"},{"ns":0,"exists":"","*":"Apache License"},{"ns":0,"exists":"","*":"Autosar"},{"ns":0,"exists":"","*":"CAN FD"},{"ns":0,"exists":"","*":"CAN bus"},{"ns":0,"exists":"","*":"CAN in Automation"},{"ns":0,"exists":"","*":"CANopen"},{"ns":0,"exists":"","*":"Can4linux"},{"ns":0,"exists":"","*":"FIFO (computing and electronics)"},{"ns":0,"exists":"","*":"Linux"},{"ns":0,"exists":"","*":"Microcontroller"},{"ns":0,"exists":"","*":"Open source"},{"ns":0,"exists":"","*":"SAE J1939"},{"ns":0,"exists":"","*":"SocketCAN"},{"ns":100,"exists":"","*":"Portal:Free software"}],"templates":[{"ns":10,"exists":"","*":"Template:Portal"},{"ns":828,"exists":"","*":"Module:Portal"},{"ns":828,"exists":"","*":"Module:Portal/images/f"},{"ns":828,"exists":"","*":"Module:Portal/images/aliases"}],"images":["Free_and_open-source_software_logo_(2009).svg","CANpieFD_Logo.png","Canpie_structure.png"],"externallinks":["https://sourceforge.net/projects/canpie/files/?source=navbar","http://www.microcontrol.net/download/canpie/canpie_user_v3r00.pdf","https://www.can-cia.org/fileadmin/resources/documents/proceedings/2012_hartwich.pdf","https://www.can-cia.org/standardization/specifications/","https://www.arm.com/products/processors/cortex-m/cortex-microcontroller-software-interface-standard.php","https://canpie.github.io/","https://github.com/canpie/CANpie","https://can-newsletter.org/software/software-miscellaneous/nr_canpie_micro-control_140225","http://www2.parc.com/spl/projects/modrobots/publications/pdf/IROS01.pdf","http://autosar.org/","http://sourceforge.net/projects/can4linux/","https://github.com/linux-can/","https://register.dpma.de/DPMAregister/pat/register?AKZ=1020040208808","https://www.can-cia.org/fileadmin/resources/documents/proceedings/2017_koppe.pdf"],"sections":[{"toclevel":1,"level":"2","line":"Driver Principle","number":"1","index":"1","fromtitle":"CANpie","byteoffset":1156,"anchor":"Driver_Principle"},{"toclevel":1,"level":"2","line":"Usage","number":"2","index":"2","fromtitle":"CANpie","byteoffset":2007,"anchor":"Usage"},{"toclevel":1,"level":"2","line":"Similar projects","number":"3","index":"3","fromtitle":"CANpie","byteoffset":2938,"anchor":"Similar_projects"},{"toclevel":1,"level":"2","line":"References","number":"4","index":"4","fromtitle":"CANpie","byteoffset":3570,"anchor":"References"},{"toclevel":1,"level":"2","line":"External links","number":"5","index":"5","fromtitle":"CANpie","byteoffset":3601,"anchor":"External_links"}],"parsewarnings":[],"displaytitle":"CANpie","iwlinks":[],"properties":[{"name":"wikibase_item","*":"Q30324779"}]}}